import{u,a as x,j as e}from"./index.6a70849c.js";import{r as d}from"./index.ea0020fc.js";import{s as a}from"./index.4cf3e048.1f571a3e.js";import{S as m}from"./search.service.36bc81ce.js";import{Product as h}from"./components.c03ea8bc.js";const p=n=>fetch(n).then(s=>s.json()),y={searchParam:""},A=()=>{const[n,s]=d.useState(y.searchParam),{data:r,error:j,isLoading:g}=u(n!==""&&x().items(n),p);d.useEffect(()=>{(()=>{const c=new URL(location.toString()).searchParams.get("search");c!=null&&s(c)})();const o=l=>{const c=l.detail;if(!(c instanceof URLSearchParams)||n==null)return;const i=c.get("search");i!=null&&s(i)};return m.listenEvent(o),()=>{m.clearEvent(o)}},[]);const N=Array.isArray(r)&&Object.groupBy(r,t=>t.category.toLocaleLowerCase());return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3 pb-5",children:[e.jsxs("h3",{className:"drop-shadow-text",children:[Array.isArray(r)?r.length:"0"," Results"]}),e.jsx("div",{className:"flex flex-wrap gap-3 items-center",children:Object.entries(N).map(([t,o])=>e.jsx("span",{className:"bg-secondary capitalize text-[0.75em]",key:t,children:o.length+" "+t}))})]}),e.jsxs("ul",{className:"flex flex-col gap-2",children:[g&&e.jsx("div",{className:"flex flex-col justify-center items-center mt-20",children:e.jsx(f,{})}),!Array.isArray(r)&&r?.error==="NO_ITEMS_FOUND"&&e.jsx("div",{className:"flex flex-col justify-center items-center",children:e.jsx("h3",{className:"mt-20 text-5xl drop-shadow-text font-bold",children:"NOT FOUND"})}),Array.isArray(r)&&r?.[0]!=null&&j==null&&r?.map(t=>e.jsx("li",{children:e.jsx(h,{as:"a",data:t,mode:"all",imageSizeStyles:"w-[7em] h-[7em]",gridTemplateColumns:"1fr 15fr",containerGridTemplateArea:'"images productData"'})},t.id))]})]})},f=()=>e.jsxs("div",{className:a["dot-spinner"],children:[e.jsx("div",{className:a["dot-spinner__dot"]}),e.jsx("div",{className:a["dot-spinner__dot"]}),e.jsx("div",{className:a["dot-spinner__dot"]}),e.jsx("div",{className:a["dot-spinner__dot"]}),e.jsx("div",{className:a["dot-spinner__dot"]}),e.jsx("div",{className:a["dot-spinner__dot"]}),e.jsx("div",{className:a["dot-spinner__dot"]}),e.jsx("div",{className:a["dot-spinner__dot"]})]}),L=({productId:n})=>{const{data:s,isLoading:r}=u(x().item(n),p);return s==null&&!r?"error":r?e.jsx(f,{}):s!=null&&"error"in s?s.error:e.jsx(h,{as:"div",containerGridTemplateArea:'"productData" "images" "productButtons"',data:s?.productFound,mode:"all",containerDirection:"flex-col",titleStyles:"text-[2.2em]",showSideImages:!0,showBuyButton:!0})};export{A as DynamicProductsList,L as ProductItem};
